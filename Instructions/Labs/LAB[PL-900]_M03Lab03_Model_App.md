---
lab:
  title: 实验室 3：如何构建模型驱动的应用
  module: 'Module 3: Get started with Power Apps'
ms.openlocfilehash: 56a807c49479c245f95e3af9566450651bcc3ebb
ms.sourcegitcommit: 99acd470de1164d438d7c4794faa28d6489c39db
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/06/2022
ms.locfileid: "144812444"
---
# <a name="module-3-get-started-with-power-apps"></a>模块 3：Power Apps 入门
## <a name="lab-how-to-build-a-model-driven-app"></a>实验室：如何构建模型驱动的应用

# <a name="scenario"></a>方案

Bellows College 是一所教育机构，校园内有多座建筑。 当前，校园访客被记录在纸质日记中。 无法始终如一地捕获信息，也无法收集和分析有关整个校园的访问数据。

校园管理部门希望对其访客登记系统进行现代化改造。在该系统中，由安全人员控制对建筑物的访问，所有访问都必须由主办人预先登记和记录。

在整个课程中，你将生成应用程序并执行自动化，以使 Bellows College 的管理和安全人员可以管理和控制校园建筑的出入情况。

在本实验室中，你将生成一个 Power Apps 模型驱动应用，以允许后台办公室的校园工作人员管理整个校园的访问记录。

# <a name="high-level-lab-steps"></a>概要实验室步骤

作为创建模型驱动应用的一部分，你将完成以下操作：

-   新建一个名为“校园管理”的模型驱动应用

-   编辑应用导航以引用所需的表

-   自定义应用所需表的表单和视图

我们将使用以下组件：

-   **视图**：视图允许用户显示表单表中的现有数据。

-   **窗体**：用户在此处创建/更新表中的新记录。

两者都将集成到模型驱动应用中，以提供更好的用户体验。

## <a name="prerequisites"></a>先决条件

-   完成“模块 0 实验室 - 验证实验室环境”

-   完成“模块 2 实验室 - 数据建模”

-   完成“模块 3 实验室 - 如何生成画布应用”

## <a name="things-to-consider-before-you-begin"></a>开始前要考虑的事项

-   应该进行哪些更改以改善用户体验？

-   基于我们生成的数据模型，我们应该在模型驱动应用中包括哪些内容？

-   可以在模型驱动应用的网站图上进行哪些自定义？

# <a name="exercise-1-customize-views-and-forms"></a>练习 \#1：自定义视图和表单

**目的：** 在本练习中，你将自定义将在模型驱动应用中使用的自定义创建表的视图和表单。

## <a name="task-1-edit-visit-form"></a>任务 \#1：编辑访问表单

1.  如果你尚未登录，请先登录到 <https://make.powerapps.com>。

2.  如果尚未选择“[我的初始] 练习”环境，请在右上角选择它。

3.  使用左侧的导航展开 Dataverse，选择“表”，然后单击以打开 Visit 表  。
>   如果未看到“访问”表，请确保位于正确的环境中（步骤 2）。

4.  选择“表单”选项卡，然后单击以打开具有“主要”表单类型的信息表单 。
>   **重要提示：** 由于默认情况下所有表单都称为“信息”，因此请确保验证所选表单的表单类型为“主要”而不是其他类型。
默认情况下，该表单具有两个字段：“名称”（主字段）和“所有者”。

5.  在屏幕右侧的“属性”面板中，选择“显示名称”字段，并将其更改为“主要信息” 。

6.  使用屏幕顶部的菜单，通过将列拖动到表单或直接单击列名来选择“+ 表单”字段，然后在“所有者”字段下添加以下字段 ：

    1.  **访问者**

    2.  **计划开始日期**

    3.  **计划结束日期**

    4.  实际开始日期

    5.  实际结束日期

7.  拖动“代码”列并将其拖到表单页眉处。

    >   标题是表单的右上角区域。 你可能需要折叠屏幕右侧的“属性”面板才能看到表单上的字段。

8.  在“代码”字段仍处于选中状态时，选中屏幕右侧“属性”面板中的“只读字段”复选框 。

9.  选择“所有者”字段。 在“属性”面板中将“标签”更改为“主机”。 

10.  单击右上方的“保存“，然后等待保存完成。

11.  单击右上方的“发布”，并等待发布完成。

12.  如果在新的浏览器标签页或窗口中打开了编辑视图，请将其关闭。 否则，请单击屏幕左上方的“上一步”。 现在应返回到“访问”表的“表单”选项卡。

## <a name="task-2-edit-active-visits-view"></a>任务 \#2：编辑“活跃访问”视图

在此任务中，我们将修改默认的“活动访问”视图并为今天的访问新建视图。

1.  选择“视图”选项卡，然后单击以打开“活动访问”视图 。

2.  通过单击或拖放字段，将以下字段添加到视图中：

    1.  **代码**

    2.  **访问者**

    3.  **计划开始日期**

    4.  **计划结束日期**

3.  单击“创建时间”列并选择“删除”。 现在将从视图中删除“创建时间”字段。

4.  重设各个列的宽度以适应数据。

5.  单击“保存”，然后等待更改保存完毕。

6.  单击“发布”并等待发布完成。

## <a name="task-3-create-new-view-for-todays-visits"></a>任务 \#3：为今天的访问新建视图

现在我们将克隆视图，来为今天的访问创建一个新视图。

1.  单击“保存”按钮旁的下拉箭头（请注意不是按按钮本身）并选择“另存为”。

2.  将名称更改为“今天的访问”，然后按“保存”。

3.  单击“属性”面板中的“编辑筛选器”链接。

2.  单击“添加”，选择“添加行”。

3.  选择“计划开始时间”作为字段，然后在下拉菜单中选择“今天”作为条件。

4.  单击“状态”行上的“...”，然后单击“删除”以删除该筛选条件  。

5.  按“确定”以保存该条件。 视图现已经过筛选，仅显示计划开始日期为今天的记录。

6.  在视图中添加“实际开始时间”和“实际结束时间”字段。

> **注意：** 由于我们不再筛选视图状态，因此我们将获得今天所有的访问，包括已完成的访问。 这些字段有助于区分完成的访问和进行中的访问。

7.  单击“ **保存**”。

8.  单击“发布”并等待发布完成。

# <a name="exercise-2-create-model-driven-application"></a>练习 \#2：创建模型驱动应用程序

**目的：** 在本练习中，你将创建模型驱动应用、自定义网站图并测试该应用。

>   为简单起见和节约时间，我们将不讨论本实验室中的一些访问列。 

## <a name="task-1-create-application"></a>任务 \#1：创建应用程序

1.  登录到 <https://make.powerapps.com>（如果尚未登录）。

2.  如果尚未选择“[我的初始] 练习”环境，请在右上角选择它。

3.  创建模型驱动应用程序：

    1.  在“主页”屏幕的“开始”部分中选择“空白应用” 。

    2.  在“基于 Dataverse 的空白应用”下，选择“创建” 。

    3.  选择“新式应用程序设计器”体验。
    
    4.  选择“创建”  。
    
    5.  输入“Bellows 校园管理”作为名称，然后选择“创建” 。

4.  加载新的模型驱动应用程序后，选择“+ 添加页面”按钮。

5.  在“添加页面”屏幕上，选择“基于表的视图和表单”，然后选择“下一步”按钮 。

6.  添加下表：

    1.  访问

    2.  联系人

7.  选择 2 个表后，选择“添加”。

8.  使用屏幕左侧的导航图标，选择“导航”。

9.  在导航窗格中，选择导航栏下方的“组 1”。

10.  在屏幕右侧的“显示选项”部分，将“标题”属性更改为“安全性”  。

## <a name="task-2-edit-your-app"></a>任务 \#2：编辑应用
现在我们已经将所有必要的组件添加到模型驱动应用程序中，现在将组织项。

1.  在“导航”窗格中的安全组下，选择“SubArea1”。

2.  选择“省略号”，然后从显示的菜单中选择删除“SubArea1” 。

3.  使用屏幕左侧的导航，选择“页面”。

4.  在“页面”窗格中找到并展开“访问”。

5.  选择“访问表单”。

6.  在屏幕右侧，选择“管理表单”。

7.  选择“主要信息”表单，然后单击“保存” 。

8.  在“页面”窗格的“访问”下，选择“访问视图” 。

9.  在屏幕右侧，选择“管理视图”。

10. 选择“今日访问”和“活跃访问”表单，然后选择“保存”  。

11. 选择“保存”。

12. “保存”完成后，选择“发布”按钮发布所做的更改 。

## <a name="task-3-test-application"></a>任务 \#3：测试应用程序

1.  启动应用程序

    1.  选择“播放”，在新窗口中打开应用。

2.  新建“Contact”

    1.  应用应该会打开“我的可用联系人”视图。 如果未打开，请选择左侧的“访问”。 

    2.  在顶部菜单中单击“新建”。

    3.  在“名字”中输入“`John`”，并在“姓氏”中输入“`Doe`” 。

    4.  在“电子邮件”中输入你的个人电子邮件。 这将在将来的实验室中使用，你将收到一封电子邮件。 

    5.  单击“保存并关闭”。

    6.  现在应该可以在“可用联系人”视图中看到创建的联系人。

4.  新建“Visit”

    1.  从网站图中选择“访问”。

    2.  单击 **“新建”** 。

    3.  输入以下字段

        1.  **名称**：`New test visit`

        2.  **访客**：选择 John Doe

        3.  **计划开始时间**：选择明天的日期和下午 2:00 作为开始时间

        4.  **计划结束时间**：选择明天的日期和下午 3:30 作为结束时间

    4.  单击“保存并关闭”。 这将创建“访问”，并且你应该可以在“活动访问”视图上看到。

    5.  将视图更改为“今天的访问”。 由于新访问安排在明天，因此视图中不再显示该访问。

5.  可以添加更多测试记录。

    正在运行的应用看上去大致如下图所示：

![](media/3-model-driven-app.png)

祝贺你！ 你已创建并配置了第一个模型驱动的应用。

# <a name="challenges"></a>挑战

-   为联系人选择特定的视图和表单
